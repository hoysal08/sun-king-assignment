[build]
builder = "DOCKERFILE"
dockerfilePath = "docker-compose.yml"

[deploy]
startCommand = "docker compose up"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Expose Order Service (Port 8081)
[[services]]
name = "order-service"
source = "."
[services.build]
builder = "DOCKERFILE"
dockerfilePath = "docker-compose.yml"
[services.deploy]
startCommand = "docker compose up order-service"
[services.healthcheck]
path = "/actuator/health"
port = 8081

# Expose Inventory Service (Port 8082)
[[services]]
name = "inventory-service"
source = "."
[services.build]
builder = "DOCKERFILE"
dockerfilePath = "docker-compose.yml"
[services.deploy]
startCommand = "docker compose up inventory-service"
[services.healthcheck]
path = "/actuator/health"
port = 8082